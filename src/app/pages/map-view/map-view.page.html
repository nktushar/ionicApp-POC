<ion-content>
  <div class="h-screen w-full bg-gray-200">
    <!-- Sidebar -->
    <div
      class="absolute right-0 w-[800px] h-auto bg-violet-300 flex justify-end duration-300"
      [class]="!isMenuOpen ? 'translate-x-full' : ''"
    >
      <div
        class="curve1 w-24 min-h-screen ease-out duration-300 rounded-l-3xl shadow-3xl z-10"
        [class]="!isMenuOpen ? 'translate-x-full' : ''"
      >
        <div class="h-screen flex flex-col justify-between">
          <!-- Sidebar Content -->
          <div>
            <div class="cursor-pointer my-2 text-right" (click)="menuToggle()">
              <ion-icon
                class="text-3xl font-bold mx-2"
                name="close-outline"
              ></ion-icon>
            </div>
            <div>
              <!-- ACCORDION -->
              <div class="w-full">
                <!-- MANUAL -->
                <div
                  class="group flex flex-col bg-[#f5feff] border-b-2 border-[#d6eaeb]"
                  tabindex="1"
                >
                  <!-- Manula Head Icon -->
                  <div
                    class="flex cursor-pointer bg-[#f5feff] text-[#0b7987] items-center justify-between px-3 py-2"
                  >
                    <ion-icon class="text-3xl" name="expand-outline"></ion-icon>
                    <ion-icon
                      class="text-xl transition-all duration-500 group-focus:-rotate-180"
                      name="chevron-down-outline"
                    ></ion-icon>
                  </div>
                  <!-- Manual Body -->
                  <div
                    class="w-24 h-24 bg-transparent overflow-y-scroll absolute right-0"
                  >
                    <div
                      class="bg-white max-h-0 transition-all group-focus:max-h-[calc(100vh-320px)] group-focus:duration-1000 overflow-x-visible overflow-y-scroll relative"
                    >
                      @for (structure of structures; track $index) { @if (
                      structure.child) {
                      <!-- Horizontal accordion -->
                      <div
                        class="curve2 absolute w-96 right-1 translate-y-[8px] h-[95px] rounded-l-2xl shadow-[-7px_0px_8px_0px_#e2e8f0] z-30 overflow-x-visible"
                      >
                        <div class="h-full w-full flex items-center">
                          <!-- Horizontal Right Arrow button -->
                          <div
                            class="absolute w-8 h-8 bg-black rounded-full -translate-x-4 flex items-center justify-center cursor-pointer"
                            (click)="onAssetClick(structure.assetId)"
                          >
                            <ion-icon
                              class="text-white text-2xl"
                              name="chevron-forward-outline"
                            ></ion-icon>
                          </div>
                          <!-- Horizontal Accordion Assets -->
                          <div
                            class="max-w-full max-h-full my-auto flex space-x-4 justify-end items-center mb-[10px] mr-[15px] ml-10 overflow-hidden"
                          >
                            @for (structure of structures; track $index) {
                            <div>
                              <div
                                class="h-[60px] w-[60px] border-1 border-[#d6eaeb] rounded-md flex justify-center items-center overflow-hidden"
                              >
                                <img
                                  class="object-cover w-full h-full"
                                  src="../../../assets/silo.png"
                                  alt="silo"
                                />
                              </div>
                              <div class="w-full text-xs text-center mt-1">
                                <span>Silo</span>
                              </div>
                            </div>
                            }
                          </div>
                        </div>
                      </div>
                      }
                      <!-- Accordion Assets -->
                      <div (click)="onAssetClick(structure.assetId)">
                        <div
                          class="mx-auto mt-3 text-3xl h-[60px] w-[60px] border-1 border-[#d6eaeb] rounded-md flex justify-center items-center overflow-hidden"
                        >
                          <img
                            class="object-cover w-full h-full"
                            src="../../../assets/silo.png"
                            alt="silo"
                          />
                        </div>
                        <div class="w-full text-xs text-center mt-1">
                          <span>Silo</span>
                        </div>
                      </div>
                      }
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Content -->
    <div class="flex-1 flex flex-col overflow-hidden">
      <!-- Navbar -->
      <div class="bg-[#4ca1b1] text-white shadow rounded-b-2xl">
        <div class="container mx-auto">
          <div class="flex justify-between items-center py-4 px-2">
            <h1 class="text-xl font-semibold">Map View</h1>
          </div>
        </div>
      </div>
      <!-- Content Body -->
      <div class="max-w-6xl h-auto mx-auto p-4">
        <!-- test card -->
        <div
          class="w-[500px] h-24 bg-gray-300 flex justify-end ml-40 overflow-y-scroll"
        >
          <div class="h-24 w-96 bg-teal-300 relative p-3">
            <div
              class="h-8 w-8 bg-fuchsia-500 border-2 border-black -ml-200 absolute -left-2"
            ></div>
            <div
              class="h-8 w-8 bg-fuchsia-500 border-2 border-black mt-10"
            ></div>
            <div class="h-8 w-8 bg-fuchsia-500 border-2 border-black"></div>
            <div class="h-8 w-8 bg-fuchsia-500 border-2 border-black"></div>
            <div class="h-8 w-8 bg-fuchsia-500 border-2 border-black"></div>
            <div class="h-8 w-8 bg-fuchsia-500 border-2 border-black"></div>
            <div class="h-8 w-8 bg-fuchsia-500 border-2 border-black"></div>
            <div class="h-8 w-8 bg-fuchsia-500 border-2 border-black"></div>
            <div class="h-8 w-8 bg-fuchsia-500 border-2 border-black"></div>
            <div class="h-8 w-8 bg-fuchsia-500 border-2 border-black"></div>
          </div>
        </div>
        <!-- ------------- -->
      </div>

      <button class="fixed bottom-[35px] right-16 z-20" (click)="menuToggle()">
        <ion-icon
          class="bg-[#007382] text-white text-3xl p-3 rounded-full"
          [name]="isMenuOpen ? 'save-outline' : 'brush-outline'"
        ></ion-icon>
      </button>
    </div>
  </div>
</ion-content>
